[Notin Link](https://www.notion.so/13-e8d06604aabb4ad381108cad50ece008)
## ì“°ë ˆë“œ

### í”„ë¡œì„¸ìŠ¤ì™€ ì“°ë ˆë“œ

- í”„ë¡œì„¸ìŠ¤ : ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨, ìì›(resources)ê³¼ ì“°ë ˆë“œë¡œ êµ¬ì„±
- ì“°ë ˆë“œ : ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰
    - ëª¨ë“  í”„ë¡œì„¸ìŠ¤ëŠ” ìµœì†Œí•œ í•˜ë‚˜ì˜ ì“°ë ˆë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.
    - `í”„ë¡œì„¸ìŠ¤ : ì“°ë ˆë“œ = ê³µì¥ : ì¼ê¾¼`

<aside>
ğŸŒŸ **í•˜ë‚˜ì˜ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒë³´ë‹¤ 
í•˜ë‚˜ì˜ ìƒˆë¡œìš´ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ë” ì ì€ ë¹„ìš©ì´ ë“ ë‹¤.**

</aside>

### ë©€í‹°ì“°ë ˆë“œì˜ ì¥ë‹¨ì 

ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë¨ì´ ë©€í‹° ì“°ë ˆë“œë¡œ ì‘ì„±ë¼ ìˆë‹¤.

ê·¸ëŸ¬ë‚˜ ë©€í‹°ì“°ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì´ ì¥ì ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

| ì¥ì  | - ì‹œìŠ¤í…œ ìì›ì„ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš©ìì— ëŒ€í•œ ì‘ë‹µì„±ì´ í–¥ìƒëœë‹¤.
- ì‘ì—…ì´ ë¶„ë¦¬ë¼ ì½”ë“œê°€ ê°„ê²°í•´ì§„ë‹¤. |
| --- | --- |
| ë‹¨ì  | - ë™ê¸°í™”ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.
- êµì°©ìƒíƒœê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•œë‹¤.
- ê° ì“°ë ˆë“œê°€ íš¨ìœ¨ì ìœ¼ë¡œ ê³ ë¥´ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆê²Œ í•´ì•¼ í•œë‹¤. |

## ì“°ë ˆë“œì˜ êµ¬í˜„ê³¼ ì‹¤í–‰

---

- Thread í´ë˜ìŠ¤ë¥¼ ìƒì†
    
    ```java
    class MyThread extends Thread{
    		@Override
    		public void run() { ... } // ì¬ì •ì˜
    }
    ```
    
- Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
    
    ```java
    class Runnalbe implements Runnable{
    		public void run() { ... } // ì¶”ìƒ ë©”ì„œë“œ êµ¬í˜„
    }
    ```
    
    ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢€ ë” ì´ìƒì ì´ë‹¤.
    
    **â“Â ì™œ ë” ì´ìƒì ì¼ê¹Œ?**
    
    êµ¬í˜„ìœ¼ë¡œ ì‘ì—…ì„ í•  ê²½ìš° ì¶”ê°€ì ì¸ í™•ì¥ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
    

```java
MyThread t1 = new MyThread();
t1.start();

Runnalbe r = new MyThread();
Thread r2 = new Thread(r);
r2.start();
```

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_1 {
    public static void main(String args[]) {
        ThreadEx1_1 t1 = new ThreadEx1_1();

        Runnable r = new ThreadEx1_2();
        Thread t2 = new Thread(r);	  // ìƒì„±ì Thread(Runnable target)

        t1.start();
        System.out.println();
        t2.start();
    }
}

class ThreadEx1_1 extends Thread { // Thread í´ë˜ìŠ¤ë¥¼ ìƒì†
    public void run() { // ì“°ë ˆë“œê°€ ìˆ˜í–‰í•  ì‘ì—…
        for(int i=0; i < 100; i++) {
            System.out.println("Threadë¥¼ í™•ì¥í•œ ìƒíƒœ : "+getName()); // ì¡°ìƒì¸ Threadì˜ getName()ì„ í˜¸ì¶œ
        }
    }
}

class ThreadEx1_2 implements Runnable { // Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
    public void run() { // ì“°ë ˆë“œê°€ ìˆ˜í–‰í•  ì‘ì—…
        for(int i=0; i < 100; i++) {
            // Thread.currentThread() - í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ Threadë¥¼ ë°˜í™˜í•œë‹¤.
            System.out.println("Runnableì„ êµ¬í˜„í•œ ìƒíƒœ : " + Thread.currentThread().getName());
        }
    }
}
```

![image](https://user-images.githubusercontent.com/53300830/178182723-afa9b19b-89e7-4b1d-8bd2-248866410f04.png)

ì“°ë ˆë“œê°€ 2ê°œë¡œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— ì§„í–‰ë˜ëŠ”ê²Œ ë’¤ì£½ë°•ì£½ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì´ì²˜ëŸ¼ ë©€í‹° ì“°ë ˆë“œë¡œ êµ¬í˜„ì„ í•  ê²½ìš° ì“°ë ˆë“œê°€ ì •í™•íˆ ì–¸ì œ ì‘ì—…ì„ ì²˜ë¦¬í• ì§€ ëª¨ë¥´ê²Œ ëœë‹¤ëŠ” ê²ƒì„ ì£¼ì˜í•´ì•¼ í•œë‹¤.

### ì“°ë ˆë“œì˜ ì‹¤í–‰ - start()

- ì“°ë ˆë“œë¥¼ ìƒì„±í•œ ë‹¤ìŒ start()ë¥¼ í˜¸ì¶œí•´ì•¼ ì“°ë ˆë“œê°€ ì‘ì—…ì„ ì‹œì‘í•œë‹¤.

```java
ThreadEx1_1 t1 = new ThreadEx1_1();
ThreadEx1_1 t2 = new ThreadEx1_1();

t1.start();
t2.start();
```

- startë¥¼ í–ˆë‹¤ê³  ë°”ë¡œ ì‹¤í–‰ë˜ëŠ”ê²Œ ì•„ë‹ˆë‹¤.
- OSì˜ ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ì‹¤í–‰ìˆœì„œë¥¼ ê²°ì •í•œë‹¤.

### start()ì™€ run()

![image](https://user-images.githubusercontent.com/53300830/178182740-91896d73-b13c-4723-8f46-1b8c31963eae.png)

run()ì´ ì•„ë‹Œ start()ë¥¼ í˜¸ì¶œí•˜ëŠ” ì´ìœ 

ë§Œì•½ ì½”ë“œì—ì„œ t1.run()ì„ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ê°™ì€ ì“°ë ˆë“œì˜ ì‘ì—… ìŠ¤íƒì— runì´ ì˜¬ë¼ê°€ê²Œ ë˜ë¯€ë¡œ í•´ë‹¹ ë‚´ìš©ì€ ìƒˆë¡œìš´ ì“°ë ˆë“œë¥¼ ìƒì„±í•´ì„œ í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

## ì‹±ê¸€ ì“°ë ˆë“œì™€ ë©€í‹° ì“°ë ˆë“œ, ì“°ë ˆë“œì˜ I/O ë¸”ë½í‚¹

---

### main ì“°ë ˆë“œ

- main ë©”ì„œë“œì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ì½”ë“œ
- ì“°ë ˆë“œëŠ” ì‚¬ìš©ì ì“°ë ˆë“œì™€ ë°ëª¬ ì“°ë ˆë“œ(ë³´ì¡° ì“°ë ˆë“œ) ë‘ ì¢…ë¥˜ê°€ ìˆë‹¤.
    
    ì‹¤í–‰ ì¤‘ì¸ ì‚¬ìš©ì ì“°ë ˆë“œê°€ í•˜ë‚˜ë„ ì—†ì„ ë•Œ í”„ë¡œê·¸ë¨ì€ ì¢…ë£Œëœë‹¤.(ë°ëª¬ ì“°ë ˆë“œëŠ” ë³„ê°œ)
    

### ì‹±ê¸€ ì“°ë ˆë“œì™€ ë©€í‹° ì“°ë ˆë“œ

- ì‹±ê¸€ ì“°ë ˆë“œ
    
    ```java
    package ìë°”ì˜ì •ì„.ch13;
    
    class Ex13_2 {
        public static void main(String args[]) {
            long startTime = System.currentTimeMillis();
    
            for(int i=0; i < 50; i++)
                System.out.print("-");
    
            System.out.print("ì†Œìš”ì‹œê°„ 1:" +(System.currentTimeMillis()- startTime));
    
            System.out.println();
            for(int i=0; i < 50; i++)
                System.out.print("-");
    
            System.out.print("ì†Œìš”ì‹œê°„ 2:"+(System.currentTimeMillis() - startTime));
            //--------------------------------------------------ì†Œìš”ì‹œê°„ 1:1
            //--------------------------------------------------ì†Œìš”ì‹œê°„ 2:45
        }
    }
    ```
    
    ì²« forë¬¸ì˜ ì‹œì‘ â†’ ë â†’ ë‘ë²ˆì§¸ forë¬¸ ì‹œì‘ â†’ ë
    
    ì´ë ‡ê²Œ ì‹±ê¸€ ì“°ë ˆë“œë¡œ ì‘ì—…í–ˆì„ ë•ŒëŠ” ì´ì „ ì‘ì—…ì´ ëë‚˜ì•¼ ë‹¤ìŒ ì‘ì—…ì´ ì‹œì‘ëœë‹¤.
    
- ë©€í‹°ì“°ë ˆë“œ
    
    ```java
    package ìë°”ì˜ì •ì„.ch13;
    
    class Ex13_3 {
        static long startTime = 0;
    
        public static void main(String args[]) {
            ThreadEx3_1 th1 = new ThreadEx3_1();
            th1.start();
            startTime = System.currentTimeMillis();
    
            for(int i=0; i < 50; i++)
                System.out.printf("%s", new String("-"));
            System.out.println();
            System.out.println("ì²« forë¬¸ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê±¸ë¦° ì‹œê°„ :" + (System.currentTimeMillis() - Ex13_3.startTime));
        }
    }
    
    class ThreadEx3_1 extends Thread {
        public void run() {
            for(int i=0; i < 50; i++)
                System.out.printf("%s", new String("+"));
            System.out.println();
            System.out.println("ë‘ ë²ˆì§¸ forë¬¸ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê±¸ë¦° ì‹œê°„ :" + (System.currentTimeMillis() - Ex13_3.startTime));
        }
    
    //    ---------------++++++++-----------------------------------
    //            ++++++++++++++++++++++++++++++++++++++++++
    //    ì²« forë¬¸ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê±¸ë¦° ì‹œê°„ :42
    //    ë‘ ë²ˆì§¸ forë¬¸ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê±¸ë¦° ì‹œê°„ :47
    }
    ```
    

![image](https://user-images.githubusercontent.com/53300830/178182758-37fa253c-5810-482f-a959-d566b8250202.png)

ë©€í‹° ì“°ë ˆë“œì™€ ì‹±ê¸€ ì“°ë ˆë“œ ì‹¤í–‰ ëª¨ìŠµ

### ì“°ë ˆë“œì˜ I/O ë¸”ë½í‚¹

Input/Output(ì…ì¶œë ¥)

ì…ì¶œë ¥ì‹œ ì‘ì—…ì¤‘ëœë‹¤ëŠ” ê²ƒì„ I/O ë¸”ë½í‚¹ì´ë¼ê³  í•œë‹¤.

- ì‹±ê¸€ì“°ë ˆë“œì˜ ê²½ìš°
    - ì…ë ¥ì„ ë°›ê¸°ê¹Œì§€ forë¬¸ì´ ì‹œì‘í•  ìˆ˜ê°€ ì—†ë‹¤.

```java
package ìë°”ì˜ì •ì„.ch13;

import javax.swing.JOptionPane;

class Ex13_4 {
    public static void main(String[] args) throws Exception {
        String input = JOptionPane.showInputDialog("ì•„ë¬´ ê°’ì´ë‚˜ ì…ë ¥í•˜ì„¸ìš”.");
        System.out.println("ì…ë ¥í•˜ì‹  ê°’ì€ " + input + "ì…ë‹ˆë‹¤.");

        for(int i=10; i > 0; i--) {
            System.out.println(i);
            try {
                Thread.sleep(1000);  // 1ì´ˆê°„ ì‹œê°„ì„ ì§€ì—°í•œë‹¤.
            } catch(Exception e ) {}
        }
    }
}
```

![image](https://user-images.githubusercontent.com/53300830/178182775-28bdfac4-6f77-434a-9a03-8e37ec0ea14a.png)

ë©€í‹°ì“°ë ˆë“œëŠ” ì‹±ê¸€ì“°ë ˆë“œì™€ ë‹¤ë¥´ê²Œ ì •ì§€ëœ ì‹œê°„ ë™ì•ˆ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.

- ë©€í‹°ì“°ë ˆë“œì˜ ê²½ìš°
    - ì…ë ¥ì„ ë°›ëŠ”ë™ì•ˆì—ë„ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ forë¬¸ì„ ëˆë‹¤.
    - ê·¸ë ‡ê¸°ì— ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì„ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ë‹¨ì¼ ì“°ë ˆë“œë¡œ í•˜ëŠ” ê²ƒë³´ë‹¤ íš¨ìœ¨ì ì´ë‹¤.

```java
class Ex13_5 {
    public static void main(String[] args) throws Exception  {
        ThreadEx5_1 th1 = new ThreadEx5_1();
        th1.start();

        String input = JOptionPane.showInputDialog("ì•„ë¬´ ê°’ì´ë‚˜ ì…ë ¥í•˜ì„¸ìš”.");
        System.out.println("ì…ë ¥í•˜ì‹  ê°’ì€ " + input + "ì…ë‹ˆë‹¤.");
    }
}

class ThreadEx5_1 extends Thread {
    public void run() {
        for(int i=10; i > 0; i--) {
            System.out.println(i);
            try {
                sleep(1000);
            } catch(Exception e ) {}
        }
    } // run()
}
```

![image](https://user-images.githubusercontent.com/53300830/178182781-26201d2a-7ff3-4995-a25e-2089571f4ff1.png)

## ì“°ë ˆë“œì˜ ìš°ì„ ìˆœìœ„, ì“°ë ˆë“œ ê·¸ë£¹

---

### ì“°ë ˆë“œì˜ ìš°ì„ ìˆœìœ„

ì‘ì—…ì˜ ì¤‘ìš”ë„ì— ë”°ë¼ ì“°ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ë‹¤ë¥´ê²Œ í•˜ì—¬ íŠ¹ì • ì“°ë ˆë“œê°€ ë” ë§ì€ ì‘ì—…ì‹œê°„ì„ ê°–ê²Œ í•  ìˆ˜ ìˆë‹¤.

ìë°”ëŠ” 1 ~ 10 ì‚¬ì´ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤ ë³´í†µì€ 5ë¡œ ì§€ì •ë¼ ìˆë‹¤.

![image](https://user-images.githubusercontent.com/53300830/178182792-e93e0b75-7c20-475f-901e-5e2d616eaba9.png)

ì‘ì—…ì˜ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ì„œ ì‹¤í–‰ì´ ëœë‹¤. ë‹¨ ìš°ë¦¬ì˜ í¬ë§ì‚¬í•­ì¼ ë¿ ê²°êµ­ì—ëŠ” OSì˜ ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ê²°ì •í•œë‹¤.

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_6 {
    public static void main(String args[]) {
        ThreadEx6_1 th1 = new ThreadEx6_1();
        ThreadEx6_2 th2 = new ThreadEx6_2();

        th2.setPriority(7);
        // th2ì˜ ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ë‹¤. defaultê°’ì´ 5ì´ê¸° ë•Œë¬¸ì—
        // ìš°ì„ ìˆœìœ„ì˜ ê°’ì´ ë†’ì„ìˆ˜ë¡ ë¨¼ì € ëë‚˜ì•¼í•¨!
        System.out.println("Priority of th1(-) : " + th1.getPriority());
        System.out.println("Priority of th2(|) : " + th2.getPriority());
        th1.start();
        th2.start();
    }
}

class ThreadEx6_1 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) {
            System.out.print("-");
            for(int x=0; x < 10000000; x++);
        }
    }
}

class ThreadEx6_2 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) {
            System.out.print("|");
            for(int x=0; x < 10000000; x++);
        }
    }
}
```

### ì“°ë ˆë“œì˜ ê·¸ë£¹

- ì„œë¡œ ê´€ë ¨ëœ ì“°ë ˆë“œë¥¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ì„œ ë‹¤ë£¨ê¸° ìœ„í•œ ê²ƒ
- ëª¨ë“  ì“°ë ˆë“œëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ì“°ë ˆë“œ ê·¸ë£¹ì— í¬í•¨ë¼ ìˆì–´ì•¼ í•œë‹¤.
- ì“°ë ˆë“œ ê·¸ë£¹ì„ ì§€ì •í•˜ì§€ ì•Šê³  ìƒì„±í•œ ì“°ë ˆë“œëŠ” main ì“°ë ˆë“œ ê·¸ë£¹ì— ì†í•œë‹¤.
- ìì‹ ì„ ìƒì„±í•œ ì“°ë ˆë“œ(ë¶€ëª¨ ì“°ë ˆë“œ)ì˜ ê·¸ë£¹ê³¼ ìš°ì„ ìˆœìœ„ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.

```java
Thread(TreadGroup group, String name); // ë“±ë“±
TreadGroup getTreadGroup() // ìì‹ ì´ ì†í•œ ì“°ë ˆë“œ ê·¸ë£¹ ë°˜í™˜
void uncaughtException(Thread t, Throable e)
// ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸ì— ì˜í•´ ì“°ë ˆë“œ ê·¸ë£¹ì˜ ì“°ë ˆë“œê°€ ì‹¤í–‰ì´ ì¢…ë£Œëì„ë•Œ JVMì´ ì´ ë©”ì„œë“œë¥¼ ìë™ì ìœ¼ë¡œ í˜¸ì¶œ
```

| ìƒì„±ì ë° ë©”ì†Œë“œ | ì„¤ëª… |
| --- | --- |
| ThreadGroup(String name) | ì§€ì •ëœ ì´ë¦„ì˜ ìƒˆë¡œìš´ ì“°ë ˆë“œ ê·¸ë£¹ì„ ìƒì„± |
| ThreadGroup(ThreadGroup parent, String name) | ì§€ì •ëœ ì“°ë ˆë“œ ê·¸ë£¹ì— í¬í•¨ë˜ëŠ” ìƒˆë¡œìš´ ì“°ë ˆë“œ ê·¸ë£¹ ìƒì„± |
| int activeCount() | ì“°ë ˆë“œ ê·¸ë£¹ì— í¬í•¨ëœ í™œì„±ìƒíƒœì— ìˆëŠ” ì“°ë ˆë“œì˜ ìˆ˜ë¥¼ ë°˜í™˜ |
| int activeGroupCount() | ì“°ë ˆë“œ ê·¸ë£¹ì— í¬í•¨ëœ í™œì„±ìƒíƒœì— ìˆëŠ” ì“°ë ˆë“œ ê·¸ë£¹ì˜ ìˆ˜ë¥¼ ë°˜í™˜ |
| void checkAccess() | í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì“°ë ˆë“œê°€ ì“°ë ˆë“œ ê·¸ë£¹ì„ ë³€ê²½í•  ê¶Œí•œì´ ìˆëŠ”ì§€ ì²´í¬ |
| void destroy() | ì“°ë ˆë“œ ê·¸ë£¹ê³¼ í•˜ìœ„ ì“°ë ˆë“œ ê·¸ë£¹ê¹Œì§€ ëª¨ë‘ ì‚­ì œí•œë‹¤. |
| int enumerate(Thread[] list) int enumerate(Thread[] list, boolean recurse) int enumerate(ThreadGroup[] list) int enumerate(ThreadGroup[] list, boolean recurse) | ì“°ë ˆë“œ ê·¸ë£¹ì— ì†í•œ ì“°ë ˆë“œ ë˜ëŠ” í•˜ìœ„ ì“°ë ˆë“œ ê·¸ë£¹ì˜ ëª©ë¡ì„ ì§€ì •ëœ ë°°ì—´ì— ë‹´ê³  ê·¸ ê°œìˆ˜ë¥¼ ë°˜í™˜ ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì¸ recurseì˜ ê°’ì„ trueë¡œ í•˜ë©´ í•˜ìœ„ ì“°ë ˆë“œ ê·¸ë£¹ì— ì“°ë ˆë“œ ë˜ëŠ” ì“°ë ˆë“œ ê·¸ë£¹ê¹Œì§€ ë°°ì—´ì— ë‹´ëŠ”ë‹¤. |
| int getMaxPriority() | ì“°ë ˆë“œ ê·¸ë£¹ì˜ ìµœëŒ€ìš°ì„ ìˆœìœ„ë¥¼ ë°˜í™˜ |
| String getName() | ì“°ë ˆë“œ ê·¸ë£¹ì˜ ì´ë¦„ì„ ë°˜í™˜ |
| ThreadGroup getParent() | ì“°ë ˆë“œ ê·¸ë£¹ì˜ ìƒìœ„ ì“°ë ˆë“œê·¸ë£¹ì„ ë°˜í™˜ |
| void interrupt() | ì“°ë ˆë“œ ê·¸ë£¹ì— ì†í•œ ëª¨ë“  ì“°ë ˆë“œë¥¼ interrupt |
| boolean isDaemon() | ì“°ë ˆë“œ ê·¸ë£¹ì´ ë°ëª¬ ì“°ë ˆë“œê·¸ë£¹ì¸ì§€ í™•ì¸ |
| boolean isDestroyed() | ì“°ë ˆë“œ ê·¸ë£¹ì´ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸ |
| void list() | ì“°ë ˆë“œ ê·¸ë£¹ì— ì†í•œ ì“°ë ˆë“œì™€ í•˜ìœ„ ì“°ë ˆë“œê·¸ë£¹ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶œë ¥ |
| boolean parentOf(ThreadGroup g) | ì§€ì •ëœ ì“°ë ˆë“œ ê·¸ë£¹ì˜ ìƒìœ„ ì“°ë ˆë“œê·¸ë£¹ì¸ì§€ í™•ì¸ |
| void setDeamon(boolean daemon) | ì“°ë ˆë“œ ê·¸ë£¹ì„ ë°ëª¬ ì“°ë ˆë“œê·¸ë£¹ìœ¼ë¡œ ì„¤ì •, í•´ì œ |
| void setMaxPriority(int pri) | ì“°ë ˆë“œ ê·¸ë£¹ì˜ ìµœëŒ€ìš°ì„ ìˆœìœ„ë¥¼ ì„¤ì • |

## ë°ëª¬ ì“°ë ˆë“œ, ì“°ë ˆë“œì˜ ìƒíƒœ

---

### ë°ëª¬ ì“°ë ˆë“œ

- ì¼ë°˜ ì“°ë ˆë“œì˜ ì‘ì—…ì„ ë•ëŠ” ë³´ì¡°ì ì¸ ì—­í• ì„ ìˆ˜í–‰
- ì¼ë°˜ ì“°ë ˆë“œê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ ìë™ì ìœ¼ë¡œ ì¢…ë£Œëœë‹¤.
- ê°€ë¹„ì§€ ì»¬ë ‰í„°, ìë™ ì €ì¥, í™”ë©´ ìë™ ê°±ì‹  ë“±ì— ì‚¬ìš©ëœë‹¤.
- ë¬´í•œë£¨í”„ì™€ ì¡°ê±´ë¬¸ì„ ì´ìš©í•´ì„œ ì‹¤í–‰ í›„ ëŒ€ê¸°í•˜ë‹¤ê°€ íŠ¹ì •ì¡°ê±´ì´ ë§Œì¡±ë˜ë©´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ë‹¤ì‹œ ëŒ€ê¸°í•˜ë„ë¡ ì‘ì„±í•œë‹¤.

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_7 implements Runnable  {
    static boolean autoSave = false;

    public static void main(String[] args) {
        Thread t = new Thread(new Ex13_7());
        t.setDaemon(true);		// ì´ ë¶€ë¶„ì´ ì—†ìœ¼ë©´ ì¢…ë£Œë˜ì§€ ì•ŠëŠ”ë‹¤.
        t.start();

        for(int i=1; i <= 10; i++) {
            try{
                Thread.sleep(1000);
            } catch(InterruptedException e) {}
            System.out.println(i);

            if(i==5) autoSave = true;
        }

        System.out.println("í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.");
    }

    public void run() {
        while(true) {
            try {
                Thread.sleep(3 * 1000); // 3ì´ˆë§ˆë‹¤
            } catch(InterruptedException e) {}

            // autoSaveì˜ ê°’ì´ trueì´ë©´ autoSave()ë¥¼ í˜¸ì¶œí•œë‹¤.
            if(autoSave) autoSave();
        }
    }

    public void autoSave() {
        System.out.println("ì‘ì—…íŒŒì¼ì´ ìë™ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
}
1
2
3
4
5
ì‘ì—…íŒŒì¼ì´ ìë™ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.
6
7
8
ì‘ì—…íŒŒì¼ì´ ìë™ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.
9
10
í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.
```

### ì“°ë ˆë“œì˜ ìƒíƒœ

| ìƒíƒœ | ì„¤ëª… |
| --- | --- |
| NEW | ì“°ë ˆë“œê°€ ìƒì„±ë˜ê³  ì•„ì§ start()ê°€ í˜¸ì¶œë˜ì§€ ì•Šì€ ìƒíƒœ |
| RUNNABLE | ì‹¤í–‰ ì¤‘ ë˜ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ìƒíƒœ |
| BLOCKED | ë™ê¸°í™”ë¸”ëŸ­ì— ì˜í•´ì„œ ì¼ì‹œì •ì§€ëœ ìƒíƒœ |
| WAITING.
TIMED_WAITING | ì“°ë ˆë“œì˜ ì‘ì—…ì´ ì¢…ë£Œë˜ì§€ ì•Šì•˜ì§€ë§Œ, ì‹¤í–‰ê°€ëŠ¥í•˜ì§€ ì•Šì€ ì¼ì‹œì •ì§€ìƒíƒœ.
TIMED_WAITINGì€ ì¼ì‹œì •ì§€ì‹œê°„ì´ ì§€ì •ëœ ê²½ìš°ë¥¼ ì˜ë¯¸ |
| TERMINATED | ì“°ë ˆë“œì˜ ì‘ì—…ì´ ì¢…ë£Œëœ ìƒíƒœ |
1. ê°€ì¥ ë¨¼ì € ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ë©´ NEW ìƒíƒœê°€ ëœë‹¤.
2. ê·¸ë¦¬ê³  start()ë¥¼ í˜¸ì¶œí•˜ë©´ RUNNABLE ìƒíƒœê°€ ëœë‹¤.
3. ê·¸ë¦¬ê³  ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Queueì— ë“¤ì–´ê°€ì„œ ìì‹ ì˜ ì°¨ë¡€ê°€ ë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤ê·¸ëŸ¬ë‹¤ê°€ ìì‹ ì˜ ì°¨ë¡€ê°€ ë˜ë©´ ì‹¤í–‰ ìƒíƒœê°€ ëœë‹¤.
4. ì£¼ì–´ì§„ ì‹œê°„ì´ ë‹¤ ë˜ê±°ë‚˜ yield()ë¥¼ ë§Œë‚˜ë©´ ë‹¤ì‹œ ëŒ€ê¸°ìƒíƒœê°€ ë˜ê³  ë‹¤ìŒ ì°¨ë¡€ì˜ ì“°ë ˆë“œê°€ ìì‹ ì˜ ì°¨ë¡€ê°€ ëœë‹¤.
5. ë˜í•œ, ì‹¤í–‰ ì¤‘ suspend(), wait(), sleep(), join()ì— ì˜í•´ì„œë„ ì¼ì‹œì •ì§€ ìƒíƒœê°€ ë  ìˆ˜ ìˆë‹¤.
6. ìì‹ ì˜ ì¼ì‹œì •ì§€ ê¸°ê°„ì´ ëë‚˜ê±°ë‚˜, notify(), resume() ë“±ì´ í˜¸ì¶œë˜ë©´ ë‹¤ì‹œ ëŒ€ê¸°ì—´ì— ì €ì¥ë¼ ì°¨ë¡€ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.
7. ì‹¤í–‰ì„ ëª¨ë‘ ë§ˆì¹˜ê±°ë‚˜ stop()ì„ í˜¸ì¶œí•˜ë©´ ì“°ë ˆë“œëŠ” ì†Œë©¸í•œë‹¤.

### ì“°ë ˆë“œì˜ ì‹¤í–‰ ì œì–´

ì“°ë ˆë“œì˜ ì‹¤í–‰ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œê°€ ì œê³µëœë‹¤.

| ë©”ì„œë“œ | ì„¤ ëª… |
| --- | --- |
| static void sleep(long millis)
static void sleep(long millis, int nanos) | ì§€ì •ëœ ì‹œê°„(ì²œë¶„ì˜ 1ì´ˆ ë‹¨ìœ„)ë™ì•ˆ ì“°ë ˆë“œë¥¼ ì¼ì‹œì •ì§€ì‹œí‚¨ë‹¤. 
ì§€ì •í•œ ì‹œê°„ì´ ì§€ë‚˜ê³  ë‚˜ë©´, ìë™ì ìœ¼ë¡œ ë‹¤ì‹œ ì‹¤í–‰ëŒ€ê¸°ìƒíƒœê°€ ëœë‹¤. |
| void join()void join(long millis)
void join(long millis, int nanos) | ì§€ì •ëœ ì‹œê°„ë™ì•ˆ ì“°ë ˆë“œê°€ ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤. 
ì§€ì •ëœ ì‹œê°„ì´ ì§€ë‚˜ê±°ë‚˜ ì‘ì—…ì´ ì¢…ë£Œë˜ë©´ join()ì„ í˜¸ì¶œí•œ ì“°ë ˆë“œë¡œ ë‹¤ì‹œ ëŒì•„ì™€ ì‹¤í–‰ì„ ê³„ì†í•œë‹¤. |
| void interrupt() | sleep()ì´ë‚˜ join()ì— ì˜í•´ ì¼ì‹œì •ì§€ìƒíƒœì¸ ì“°ë ˆë“œë¥¼ ê¹¨ì›Œì„œ ì‹¤í–‰ëŒ€ê¸°ìƒíƒœë¡œ ë§Œë“ ë‹¤.
í•´ë‹¹ ì“°ë ˆë“œì—ì„œëŠ” InterruptedExceptionì´ ë°œìƒí•¨ìœ¼ë¡œì¨ ì¼ì‹œì •ì§€ìƒíƒœë¥¼ ë²—ì–´ë‚˜ê²Œ í•œë‹¤. |
| void stop()Â [ì•ˆì”€] | ì“°ë ˆë“œë¥¼ ì¦‰ì‹œ ì¢…ë£Œì‹œí‚¨ë‹¤. |
| void suspend() [ì•ˆì”€] | ì“°ë ˆë“œë¥¼ ì¼ì‹œì •ì§€ì‹œí‚¨ë‹¤. resume()ì„ í˜¸ì¶œí•˜ë©´ ë‹¤ì‹œ ì‹¤í–‰ëŒ€ê¸°ìƒíƒœê°€ ëœë‹¤. |
| void resume()Â [ì•ˆì”€] | suspend()ì— ì˜í•´ ì¼ì‹œì •ì§€ìƒíƒœì— ìˆëŠ” ì“°ë ˆë“œë¥¼ ì‹¤í–‰ëŒ€ê¸°ìƒíƒœë¡œ ë§Œë“ ë‹¤. |
| static void yield() | ì‹¤í–‰ ì¤‘ì— ìì‹ ì—ê²Œ ì£¼ì–´ì§„ ì‹¤í–‰ì‹œê°„ì„ ë‹¤ë¥¸ ì“°ë ˆë“œì—ê²Œ ì–‘ë³´(yield)í•˜ê³  ìì‹ ì€ ì‹¤í–‰ëŒ€ê¸°ìƒíƒœê°€ ëœë‹¤. |

### sleep()

- í˜„ì¬ ì“°ë ˆë“œë¥¼ ì§€ì •ëœ ì‹œê°„ë™ì•ˆ ë©ˆì¶”ê²Œ í•œë‹¤.
    
    ```java
    static void sleep(long millis)
    static void sleep(long millis, int nanos)
    ```
    
- ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.
- íŠ¹ì • ì“°ë ˆë“œë¥¼ ì§€ì •í•´ì„œ ë©ˆì¶”ê²Œ í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.(staticì´ê¸° ë•Œë¬¸ì—)

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_8 {
    public static void main(String args[]) {
        ThreadEx8_1 th1 = new ThreadEx8_1();
        ThreadEx8_2 th2 = new ThreadEx8_2();
        th1.start(); th2.start();
        delay(2 * 1000);
        

        System.out.print("main ì¢…ë£Œ");
    } // main
    static void delay(long millis) {
        try {
//            th1.sleep(2000); // th1ì„ ì¢…ë£Œì‹œí‚¨ë‹¤ëŠ” ê±´ê°€?
            // í•˜ì§€ë§Œ í˜„ì‹¤ì€ ë°”ë¡œ "-"ì´ ì°íˆëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
            // ì¦‰ ì´ ì½”ë“œëŠ” main ì“°ë ˆë“œê°€ ì ìëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
            Thread.sleep(2000);
        } catch(InterruptedException e) {}
    }
}

class ThreadEx8_1 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) System.out.print("-");
        System.out.print("th1 ì¢…ë£Œ");
    } // run()
}

class ThreadEx8_2 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) System.out.print("|");
        System.out.print("th2 ì¢…ë£Œ");
    } // run()
}
```

### interrupt()

- ëŒ€ê¸°ìƒíƒœì¸ ì“°ë ˆë“œë¥¼ ì‹¤í–‰ëŒ€ê¸° ìƒíƒœë¡œ ë§Œë“ ë‹¤.

```java
void interrupt() // interrupted ìƒíƒœë¥¼ false -> true
boolean isInterrupted() // interrupted ìƒíƒœ ë°˜í™˜
static boolean interrupted() // í˜„ì¬ ì“°ë ˆë“œì˜ interruptedìƒíƒœë¥¼ ì•Œë ¤ì£¼ê³ , falseë¡œ ì´ˆê¸°í™”
```

```java
package ìë°”ì˜ì •ì„.ch13;

import javax.swing.JOptionPane;

class Ex13_9 {
    public static void main(String[] args) throws Exception {
        ThreadEx9_1 th1 = new ThreadEx9_1();
        th1.start();

        String input = JOptionPane.showInputDialog("ì•„ë¬´ ê°’ì´ë‚˜ ì…ë ¥í•˜ì„¸ìš”.");
        System.out.println("ì…ë ¥í•˜ì‹  ê°’ì€ " + input + "ì…ë‹ˆë‹¤.");
        th1.interrupt();  // interrupt()ë¥¼ í˜¸ì¶œí•˜ë©´, interruptedìƒíƒœê°€ trueê°€ ëœë‹¤.
        System.out.println("isInterrupted():"+ th1.isInterrupted()); // true
    }
}

class ThreadEx9_1 extends Thread {
    public void run() {
        int i = 10;

        while(i!=0 && !isInterrupted()) {
            System.out.println(i--);
            for(long x=0;x<2500000000L;x++); // ì‹œê°„ ì§€ì—°
        }
        System.out.println("ì¹´ìš´íŠ¸ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
}
10
9
8
7
6
2022-07-11 11:25:42.022 java[94656:32145423] TSM AdjustCapsLockLEDForKeyTransitionHandling - _ISSetPhysicalKeyboardCapsLockLED Inhibit
5
ì…ë ¥í•˜ì‹  ê°’ì€ 50ì…ë‹ˆë‹¤.
isInterrupted():true
ì¹´ìš´íŠ¸ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
```

### suspend(), resume(), stop()

- ì“°ë ˆë“œì˜ ì‹¤í–‰ì„ ì¼ì‹œì •ì§€ ì¬ê°œ ì™„ì „ì •ì§€ ì‹œí‚¨ë‹¤.

```java
void suspend() // ì¼ì‹œì •ì§€
void resume() // suspend()ì— ì˜í•´ ì¼ì‹œì •ì§€ëœ ì“°ë ˆë“œë¥¼ ì‹¤í–‰ëŒ€ê¸° ìƒíƒœë¡œ ë§Œë“ ë‹¤.
void stop() // ì¦‰ì‹œ ì¢…ë£Œ 
```

- suspend(), resume(), stop()ì€ êµì°©ìƒíƒœì— ë¹ ì§€ê¸° ì‰¬ì›Œì„œ deprecated ëë‹¤.

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_10 {
    public static void main(String args[]) {
        MyThread th1 = new MyThread("*");
        MyThread th2 = new MyThread("**");
        MyThread th3 = new MyThread("***");
        th1.start();
        th2.start();
        th3.start();

        try {
            Thread.sleep(2000);
            th1.suspend();	// ì“°ë ˆë“œ th1ì„ ì ì‹œ ì¤‘ë‹¨ì‹œí‚¨ë‹¤.
            Thread.sleep(2000);
            th2.suspend();
            Thread.sleep(3000);
            th1.resume();	// ì“°ë ˆë“œ th1ì´ ë‹¤ì‹œ ë™ì‘í•˜ë„ë¡ í•œë‹¤.
            Thread.sleep(3000);
            th1.stop();		// ì“°ë ˆë“œ th1ì„ ê°•ì œì¢…ë£Œì‹œí‚¨ë‹¤.
            th2.stop();
            Thread.sleep(2000);
            th3.stop();
        } catch (InterruptedException e) {}
    } // main
}

class MyThread implements Runnable {
    // volatileì„ ë¶™ì—¬ì•¼ì§€ ì¢…ë£Œëœë‹¤.
    // vloatileì„ ì‚¬ìš©í•  ê²½ìš° ì›ë³¸ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
    volatile boolean suspended = false;
    volatile boolean stopped = false;

    Thread th;

    MyThread(String name){
        th = new Thread(this, name); // Thread (Runnable r, String name;
    }

    void start() {
        th.start();
    }

    void stop() {
        stopped = true;
    }

    void suspend() {
        suspended = true;
    }

    void resume() {
        suspended = false;
    }

    public void run() {
        while(!stopped) {
            if(!suspended) {
                System.out.println(Thread.currentThread().getName());
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                }
            }
        }
    } // run()
}
```

### join()

- ì§€ì •ëœ ì‹œê°„ë™ì•ˆ íŠ¹ì • ì“°ë ˆë“œê°€ ì‘ì—…í•˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦°ë‹¤.

```java
void join() // ì‘ì—…ì´ ëª¨ë‘ ëë‚ ë•Œ ê¹Œì§€
void join(long millis) // ì²œë¶„ì˜ ì¼ì´ˆë™ì•ˆ
void join(long millis, int nanos) // ì²œë¶„ì˜ ì¼ì´ˆ + ë‚˜ë…¸ì´ˆë™ì•ˆ
```

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_11 {
    static long startTime = 0;

    public static void main(String args[]) {
        ThreadEx11_1 th1 = new ThreadEx11_1();
        ThreadEx11_2 th2 = new ThreadEx11_2();
        th1.start();
        th2.start();
        startTime = System.currentTimeMillis();

        try {
            // join ì„ ì£¼ì„ì²˜ë¦¬ í•  ê²½ìš°
            // ì†Œìš”ì‹œê°„:0ì„ ì¶œë ¥í•˜ê³  mainì€ ì¢…ë£Œëœë‹¤.
            th1.join();	// mainì“°ë ˆë“œê°€ th1ì˜ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.
            th2.join();	// mainì“°ë ˆë“œê°€ th2ì˜ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.
        } catch(InterruptedException e) {}

        System.out.print("ì†Œìš”ì‹œê°„:" + (System.currentTimeMillis() - Ex13_11.startTime));
        // ì†Œìš”ì‹œê°„:25
    } // main
}

class ThreadEx11_1 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) {
            System.out.print(new String("-"));
        }
    } // run()
}

class ThreadEx11_2 extends Thread {
    public void run() {
        for(int i=0; i < 300; i++) {
            System.out.print(new String("|"));
        }
    } // run()
}
```

### yield()

- ë‚¨ì€ ì‹œê°„ì„ ë‹¤ìŒ ì“°ë ˆë“œì—ê²Œ ì–‘ë³´í•˜ê³  ìì‹ ì€ ì‹¤í–‰ëŒ€ê¸°í•œë‹¤.
- yield()ì™€ interrupt()ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ë©´, ì‘ë‹µì„±ê³¼ íš¨ìœ¨ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

## ì“°ë ˆë“œì˜ ë™ê¸°í™”(synchronization)

---

- ë©€í‹°ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ì—ì„œëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œì˜ ì‘ì—…ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.
- ì§„í–‰ì¤‘ì¸ ì‘ì—…ì´ ë‹¤ë¥¸ ì“°ë ˆë“œì—ê²Œ ê°„ì„­ë°›ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ë™ê¸°í˜¸ê°€ í•„ìš”
    
    ```java
    ì“°ë ˆë“œì˜ ë™ê¸°í™” - í•œ ì“°ë ˆë“œê°€ ì§„í–‰ì¤‘ì¸ ì‘ì—…ì„ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ê°„ì„­í•˜ì§€ ëª»í•˜ê²Œ ë§‰ëŠ” ê²ƒ
    ```
    
- ë™ê¸°í™”í•˜ë ¤ë©´ ê°„ì„­ë°›ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ë¬¸ì¥ë“¤ì„ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì„¤ì •
- ì„ê³„ì˜ì—­ì€ ë½ì„ ì–»ì€ ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì¶œì… ê°€ëŠ¥(ê°ì²´ 1ê°œì— ë½ 1ê°œ)

### synchronizedë¥¼ ì´ìš©í•œ ë™ê¸°í™”

- synchronizedë¡œ ì„ê³„ì˜ì—­ì„ ì„¤ì •í•˜ëŠ” ë°©ë²• 2ê°€ì§€

```java
1. ë©”ì„œë“œ ì „ì²´ë¥¼ ì„ê³„ ì˜ì—­ìœ¼ë¡œ ì§€ì •
public synchronized void clacSum(){}
2. íŠ¹ì •í•œ ì—­ì—­ì„ ì„ê³„ ì˜ì—­ìœ¼ë¡œ ì§€ì •
synchronized(ê°ì²´ì˜ ì°¸ì¡° ë³€ìˆ˜){}
```

```java
package ìë°”ì˜ì •ì„.ch13;

class Ex13_12 {
    public static void main(String args[]) {
        Runnable r = new RunnableEx12();
        new Thread(r).start(); // ThreadGroupì— ì˜í•´ ì°¸ì¡°ë˜ë¯€ë¡œ gcëŒ€ìƒì´ ì•„ë‹ˆë‹¤.
        new Thread(r).start(); // ThreadGroupì— ì˜í•´ ì°¸ì¡°ë˜ë¯€ë¡œ gcëŒ€ìƒì´ ì•„ë‹ˆë‹¤.
    }
}

class Account {
    private int balance = 1000;

    public synchronized int getBalance() {
        return balance;
    }

		// synchronizedë¥¼ ë¶™ì´ë©´ ë™ê¸°í™”ë¥¼ í•´ë†¨ê¸°ì— -ë¡œ ë–¨ì–´ì§ˆ ì¼ì´ ì—†ë‹¤.
    public synchronized void withdraw(int money){
        if(balance >= money) {
            try { Thread.sleep(1000);} catch(InterruptedException e) {}
            balance -= money;
        }
    } // withdraw
}

class RunnableEx12 implements Runnable {
    Account acc = new Account();

    public void run() {
        while(acc.getBalance() > 0) {
            // 100, 200, 300ì¤‘ì˜ í•œ ê°’ì„ ì„ìœ¼ë¡œ ì„ íƒí•´ì„œ ì¶œê¸ˆ(withdraw)
            int money = (int)(Math.random() * 3 + 1) * 100;
            acc.withdraw(money);
            System.out.println("balance:"+acc.getBalance());
        }
    } // run()
}
// ë™ê¸°í™” ì „
balance:700
balance:800
balance:600
balance:400
balance:200
balance:200
balance:0
balance:-100

// ë™ê¸°í™” í›„
balance:900
balance:600
balance:300
balance:0
balance:0
```

## wait()ê³¼ notify()

- ë™ê¸°í™” íš¨ìœ¨ì„ ë†’ì´ê¸° ìœ„í•´ waitê³¼ notify()ë¥¼ í™œìš©
- Object í´ë˜ìŠ¤ì— ì •ì˜ë¼ ìˆìœ¼ë©°, ë™ê¸°í™” ë¸”ë¡ ë‚´ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - wait() - ê°ì²´ì˜ lockì„ í’€ê³  ì“°ë ˆë“œë¥¼ í•´ë‹¹ ê°ì²´ì˜ waiting poolì— ë„£ëŠ”ë‹¤.
    - notify() - waiting poolì—ì„œ ëŒ€ê¸°ì¤‘ì¸ ì“°ë ˆë“œ ì¤‘ì˜ í•˜ë‚˜ë¥¼ ê¹¨ìš´ë‹¤
    - notifyAll() - waiting pool ì—ì„œ ëŒ€ê¸°ì¤‘ì¸ ëª¨ë“  ì“°ë ˆë“œë¥¼ ê¹¨ìš´ë‹¤.

**ì˜ˆì œ**

- ìš”ë¦¬ì‚¬ëŠ” tableì— ìŒì‹ì„ ì¶”ê°€ ì†ë‹˜ì€ tableì˜ ìŒì‹ì„ ì†Œë¹„
- ìš”ë¦¬ì‚¬ëŠ” ì†ë‹˜ì´ ê°™ì€ ê°ì²´(table)ì„ ê³µìœ í•˜ë¯€ë¡œ ë™ê¸°í™”ê°€ í•„ìš”í•˜ë‹¤.

```java
package ìë°”ì˜ì •ì„.ch13;

import java.util.ArrayList;

class Customer implements Runnable {
    private Table  table;
    private String food;

    Customer(Table table, String food) {
        this.table = table;
        this.food  = food;
    }

    public void run() {
        while(true) {
            try { Thread.sleep(10);} catch(InterruptedException e) {}
            String name = Thread.currentThread().getName();

            if(eatFood())
                System.out.println(name + " ate a " + food);
            else
                System.out.println(name + " failed to eat. :(");
        } // while
    }

    boolean eatFood() { return table.remove(food); }
}

class Cook implements Runnable {
    private Table table;

    Cook(Table table) {	this.table = table; }

    public void run() {
        while(true) {
            int idx = (int)(Math.random()*table.dishNum());
            table.add(table.dishNames[idx]);
            try { Thread.sleep(100);} catch(InterruptedException e) {}
        } // while
    }
}

class Table {
    String[] dishNames = { "donut","donut","burger" };
    final int MAX_FOOD = 6;
    private ArrayList<String> dishes = new ArrayList<>();
    public synchronized void add(String dish) { // synchronizedï¿½ï¿½ ï¿½ß°ï¿½
        if(dishes.size() >= MAX_FOOD)
            return;
        dishes.add(dish);
        System.out.println("Dishes:" + dishes.toString());
    }

    public boolean remove(String dishName) {
        synchronized(this) {
            while(dishes.size()==0) {
                String name = Thread.currentThread().getName();
                System.out.println(name+" is waiting.");
                try { Thread.sleep(500);} catch(InterruptedException e) {}
            }

            for(int i=0; i<dishes.size();i++)
                if(dishName.equals(dishes.get(i))) {
                    dishes.remove(i);
                    return true;
                }
        } // synchronized

        return false;
    }

    public int dishNum() { return dishNames.length; }
}

class Ex13_14 {
    public static void main(String[] args) throws Exception {
        Table table = new Table(); // ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½å°¡ ï¿½ï¿½ï¿½ï¿½ï¿½Ï´ï¿½ ï¿½ï¿½Ã¼

        new Thread(new Cook(table), "COOK").start();
        new Thread(new Customer(table, "donut"),  "CUST1").start();
        new Thread(new Customer(table, "burger"), "CUST2").start();

        Thread.sleep(5000);
        System.exit(0);
    }
}
Dishes:[donut]
CUST2 is waiting.
CUST1 ate a donut
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
CUST2 is waiting.
```

- ìŒì‹ì´ ì—†ì„ ë•Œ ì†ë‹˜ì´ Tableì˜ lockì„ ì¥ê³  ì•ˆë†“ëŠ”ë‹¤.
- wait()ìœ¼ë¡œ ì†ë‹˜ì´ lockì„ í’€ê³  ê¸°ë‹¤ë¦¬ê²Œí•œë‹¤.
- ìš”ë¦¬ì‚¬ê°€ ìŒì‹ì„ ì¶”ê°€í•˜ë©´ notify()ë¡œ ì†ë‹˜ì—ê²Œ ì•Œë¦¬ì.
